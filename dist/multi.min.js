/*! multi.js 18-02-2024 */

var multi=function(){var e=function(e,t){var n=t.limit;if(n>-1){for(var i=0,r=0;r<e.options.length;r++)e.options[r].selected&&i++;if(i===n){this.disabled_limit=!0,"function"==typeof t.limit_reached&&t.limit_reached();for(r=0;r<e.options.length;r++){(a=e.options[r]).selected||a.setAttribute("disabled",!0)}}else if(this.disabled_limit){for(r=0;r<e.options.length;r++){var a;"false"===(a=e.options[r]).getAttribute("data-origin-disabled")&&a.removeAttribute("disabled")}this.disabled_limit=!1}}},t=function(t,n,a){var l=t.options[n];if(!l.disabled){var s,d,o;l.selected=!l.selected,e(t,a),s="change",d=t,(o=document.createEvent("HTMLEvents")).initEvent(s,!1,!0),d.dispatchEvent(o);var c=i(t,a);r(t,a,c)}};function n(e,t){var n=t.querySelectorAll(".item");if(n)for(var i=0;i<n.length;i++)n[i].classList.remove("hilight")}var i=function(e,t){for(var n=e.wrapper.lists.selected.querySelectorAll(".item"),i=[],r=0;r<n.length;r++)i.push(n[r].getAttribute("data-value"));return i},r=function(e,t,n){e.setAttribute("data-selected-order",JSON.stringify(n))},a=function(e,t){if(e.wrapper.lists.selected.innerHTML="",e.wrapper.lists.non_selected.innerHTML="",t.non_selected_header&&t.selected_header){var n=document.createElement("div"),i=document.createElement("div");n.className="header",i.className="header",n.innerText=t.non_selected_header,i.innerText=t.selected_header,e.wrapper.lists.non_selected.appendChild(n),e.wrapper.lists.selected.appendChild(i)}if(e.wrapper.search)var a=e.wrapper.search.value;for(var l,s,d=null,o=null,c=function(e,t){try{return JSON.parse(e.getAttribute("data-selected-order"))}catch(e){return[]}}(e),u=[],p=e.getAttribute("data-multi-hilight"),h=0;h<e.options.length;h++){var m=e.options[h],b=m.value,v=m.textContent||m.innerText,_=document.createElement("li");if(_.tabIndex=0,_.className="item",_.innerText=v,_.setAttribute("role","option"),_.setAttribute("data-value",b),_.setAttribute("multi-index",h),m.disabled&&(_.className+=" disabled"),m.selected){_.className+=" selected";var f=_.cloneNode(!0);p==h&&(f.className+=" hilight"),u.push(f)}else p==h&&(_.className+=" hilight");if("OPTGROUP"==m.parentNode.nodeName&&m.parentNode!=o){if(o=m.parentNode,(d=document.createElement("div")).className="item-group",m.parentNode.label){var g=document.createElement("span");g.innerHTML=m.parentNode.label,g.className="group-label",d.appendChild(g)}e.wrapper.lists.non_selected.appendChild(d)}m.parentNode==e&&(d=null,o=null),(!a||a&&v.toLowerCase().indexOf(a.toLowerCase())>-1)&&(null!=d?d.appendChild(_):e.wrapper.lists.non_selected.appendChild(_))}for(var N=0;N<c.length;N++)l=c[N],(s=u.find_option_by_value(l))>=0&&(e.wrapper.lists.selected.appendChild(u[s]),u.splice(s,1));for(N=0;N<u.length;N++)e.wrapper.lists.selected.appendChild(u[N]),c.push(u[N].getAttribute("data-value"));if(r(e,t,c),t.hide_empty_groups){var w=document.getElementsByClassName("item-group");for(h=0;h<w.length;h++)w[h].childElementCount<2&&(w[h].style.display="none")}};Array.prototype.find_option_by_value=function(e){for(var t=0;t<this.length;t++)if(this[t].getAttribute("data-value")==e)return t;return-1};return function(l,s){if((s=void 0!==s?s:{}).enable_search=void 0===s.enable_search||s.enable_search,s.search_placeholder=void 0!==s.search_placeholder?s.search_placeholder:"Search...",s.non_selected_header=void 0!==s.non_selected_header?s.non_selected_header:null,s.selected_header=void 0!==s.selected_header?s.selected_header:null,s.limit=void 0!==s.limit?parseInt(s.limit):-1,isNaN(s.limit)&&(s.limit=-1),s.hide_empty_groups=void 0!==s.hide_empty_groups&&s.hide_empty_groups,s.selected_order=Array.isArray(s.selected_order)?s.selected_order:[],s.show_move_buttons=void 0!==s.show_move_buttons&&s.show_move_buttons,null==l.dataset.multijs&&"SELECT"==l.nodeName&&l.multiple){l.style.display="none",l.setAttribute("data-multijs",!0),l.setAttribute("data-selected-order",JSON.stringify(s.selected_order));var d=document.createElement("div");if(d.className="multi-wrapper",s.enable_search){var o=document.createElement("input");o.className="search-input",o.type="text",o.setAttribute("placeholder",s.search_placeholder),o.setAttribute("title",s.search_placeholder),o.addEventListener("input",function(){a(l,s)}),d.appendChild(o),d.search=o}var c=document.createElement("div");c.className="multi-wraplists";var u=document.createElement("ol");u.className="non-selected-wrapper",u.setAttribute("role","listbox");var p=document.createElement("ol");if(p.className="selected-wrapper",p.setAttribute("role","listbox"),d.addEventListener("keypress",function(e){var n=32===e.keyCode||13===e.keyCode,i=e.target.getAttribute("multi-index");i&&n&&(e.preventDefault(),t(l,i,s))}),c.appendChild(u),s.show_move_buttons){var h=document.createElement("div"),m=document.createElement("button"),b=document.createElement("button");h.className="wrapper-center",m.className="btn btn-right",b.className="btn btn-left",m.setAttribute("type","button"),b.setAttribute("type","button"),m.innerHTML=s.button_up_label?s.button_up_label:"→",b.innerHTML=s.button_down_label?s.button_down_label:"←",h.appendChild(m),h.appendChild(b),c.appendChild(h),b.addEventListener("click",function(e){var n=parseInt(l.getAttribute("data-multi-hilight"));if(n>=0){var i=l.options[n];!i.disabled&&i.selected&&t(l,n,s)}}),m.addEventListener("click",function(e){var n=parseInt(l.getAttribute("data-multi-hilight"));if(n>=0){var i=l.options[n];i.disabled||i.selected||t(l,n,s)}})}if(c.appendChild(p),c.non_selected=u,c.selected=p,d.appendChild(c),d.lists=c,l.wrapper=d,l.parentNode.insertBefore(d,l.nextSibling),d.addEventListener("dblclick",function(e){e.target.getAttribute("multi-index")&&t(l,e.target.getAttribute("multi-index"),s)}),d.addEventListener("click",function(e){e.target.getAttribute("multi-index")&&(d.lists.selected.contains(e.target)||d.lists.non_selected.contains(e.target))&&function(e,t,i){var r=t.target.getAttribute("multi-index");e.options[r].disabled||(e.setAttribute("data-multi-hilight",""+r),n(0,e.wrapper.lists.selected),n(0,e.wrapper.lists.non_selected),t.target.className+=" hilight")}(l,e)}),s.selected_updown){var v=document.createElement("div"),_=document.createElement("div"),f=document.createElement("div"),g=document.createElement("button"),N=document.createElement("button");if(v.className="wrapper-low",f.className="controls",_.className="controls",g.className="btn btn-up",N.className="btn btn-down",g.setAttribute("type","button"),N.setAttribute("type","button"),g.innerHTML=s.button_up_label?s.button_up_label:"↑",N.innerHTML=s.button_down_label?s.button_down_label:"↓",f.appendChild(g),f.appendChild(N),v.appendChild(_),s.show_move_buttons){var w=document.createElement("div");w.className="wrapper-center",v.appendChild(w)}v.appendChild(f),d.appendChild(v),g.addEventListener("click",function(e){!function(e,t,n){for(var a=e.wrapper.lists.selected.querySelectorAll(".item"),l=1;l<a.length;l++){var s=a[l];s.classList.contains("hilight")&&e.wrapper.lists.selected.insertBefore(s,a[l-1])}var d=i(e,n);r(e,n,d)}(l,0,s)}),N.addEventListener("click",function(e){!function(e,t,n){for(var a=e.wrapper.lists.selected.querySelectorAll(".item"),l=0;l<a.length-1;l++){var s=a[l];s.classList.contains("hilight")&&e.wrapper.lists.selected.insertBefore(s,a[l+1].nextSibling)}var d=i(e,n);r(e,n,d)}(l,0,s)})}for(var A=0;A<l.options.length;A++){var y=l.options[A];y.setAttribute("data-origin-disabled",y.disabled)}e(l,s),a(l,s),l.addEventListener("change",function(){a(l,s)})}}}(),multi_get_selected_order=function(e){if(e)try{var t=e.getAttribute("data-selected-order");return t?JSON.parse(t):void 0}catch(e){return[]}};"undefined"!=typeof jQuery&&function(e){e.fn.multi=function(t){if("string"!=typeof t)return settings=void 0!==t?t:{},this.each(function(){var t=e(this);multi(t.get(0),settings)});if("multi_get_selected_order"===t){var n=e(this);if(n.length>1)throw"Method call only supported on a single jQuery object.";return multi_get_selected_order(n.get(0))}}}(jQuery);